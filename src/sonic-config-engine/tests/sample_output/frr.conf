!
! =========== Managed by sonic-cfggen DO NOT edit manually! ====================
! generated by templates/frr/frr.conf.j2 with config DB data
! file: frr.conf
!
!
!
hostname switch-t0
password zebra
enable password zebra
!
log syslog informational
log facility local4
!!
agentx
!
!
!
! Enable link-detect (default disabled)
interface PortChannel01
link-detect
!
interface PortChannel02
link-detect
!
interface PortChannel03
link-detect
!
interface PortChannel04
link-detect
!
!
! Set ip source to loopback for bgp learned routes
route-map RM_SET_SRC permit 10
    set src 10.1.0.32
!
 
route-map RM_SET_SRC6 permit 10
    set src fc00:1::32
!
ip protocol bgp route-map RM_SET_SRC
!
ipv6 protocol bgp route-map RM_SET_SRC6
!
!!
!
! set static default route to mgmt gateway as a backup to learned default
ip route 0.0.0.0/0 10.0.0.1 200
!!
!
!
! bgp multiple-instance
!
route-map FROM_BGP_SPEAKER_V4 permit 10
!
route-map TO_BGP_SPEAKER_V4 deny 10
!
ip prefix-list PL_LoopbackV4 permit 10.1.0.32/32
ipv6 prefix-list PL_LoopbackV6 permit fc00:1::/64
!
!
route-map TO_BGP_PEER_V4 permit 100
!
route-map TO_BGP_PEER_V6 permit 100
!
route-map FROM_BGPMON_V4 deny 10
!
route-map TO_BGPMON_V4 permit 10
!
!
route-map ISOLATE permit 10
  set as-path prepend 65100
!
route-map set-next-hop-global-v6 permit 10
  set ipv6 next-hop prefer-global
!
router bgp 65100
  bgp log-neighbor-changes
  bgp bestpath as-path multipath-relax
  no bgp default ipv4-unicast
  bgp graceful-restart restart-time 240
  bgp graceful-restart
  bgp graceful-restart preserve-fw-state
  bgp router-id 10.1.0.32
  network 10.1.0.32/32
  address-family ipv6
    network fc00:1::32/64
  exit-address-family
  network 192.168.0.1/27
  address-family ipv4
    maximum-paths 64
  exit-address-family
  address-family ipv6
    maximum-paths 64
  exit-address-family
  neighbor PEER_V4 peer-group
  neighbor PEER_V6 peer-group
  address-family ipv4
    neighbor PEER_V4 allowas-in 1
    neighbor PEER_V4 soft-reconfiguration inbound
    neighbor PEER_V4 route-map TO_BGP_PEER_V4 out
  exit-address-family
  address-family ipv6
    neighbor PEER_V6 allowas-in 1
    neighbor PEER_V6 soft-reconfiguration inbound
    neighbor PEER_V6 route-map TO_BGP_PEER_V6 out
  exit-address-family
  neighbor BGPMON_V4 peer-group
  neighbor BGPMON_V4 update-source 10.1.0.32
  neighbor BGPMON_V4 route-map FROM_BGPMON_V4 in
  neighbor BGPMON_V4 route-map TO_BGPMON_V4 out
  neighbor BGPMON_V4 send-community
  neighbor BGPMON_V4 maximum-prefix 1
  neighbor 10.20.30.40 remote-as 65100
  neighbor 10.20.30.40 peer-group BGPMON_V4
  neighbor 10.20.30.40 description BGPMonitor
  neighbor 10.20.30.40 activate
!!
